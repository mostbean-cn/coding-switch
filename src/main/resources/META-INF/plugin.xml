<!-- Plugin Configuration File -->
<idea-plugin>
    <id>com.github.mostbean.codingswitch</id>
    <name>Coding Switch</name>
    <vendor>mostbean</vendor>

    <description><![CDATA[
    <h2>Coding Switch — AI 编程 CLI 多合一配置管理器</h2>
    <p>在 IDE 内一站式管理和切换 Claude Code、Codex、Gemini CLI、OpenCode 等主流 AI 编程命令行工具的全部配置，告别繁琐的手动编辑。</p>

    <h3>✨ 核心功能</h3>
    <ul>
        <li><b>供应商配置管理</b> — 统一管理多个 AI CLI 的 API Key、模型和接入点。支持官方接口，同时内置丰富的国产大模型预设，一键切换，无需手动修改配置文件。</li>
        <li><b>MCP 服务器管理</b> — 集中管理 Model Context Protocol (MCP) 服务器配置，为所有支持的 AI CLI 统一维护工具链。</li>
        <li><b>技能管理 (Skills)</b> — 直接从 GitHub 仓库发现、安装和管理自定义技能（如 Claude Skills），扩展 AI 编程助手的能力边界。</li>
        <li><b>提示词管理 (Prompts)</b> — 多组系统提示词预设管理，支持 Markdown 格式编写，快速切换 AI 助手的上下文和行为模式。</li>
    </ul>

    <h3>🔌 支持的 AI CLI 工具</h3>
    <table>
        <tr><th>工具</th><th>官方 API</th><th>第三方 API</th></tr>
        <tr><td>Claude Code</td><td>✅</td><td>✅</td></tr>
        <tr><td>Codex (OpenAI)</td><td>✅</td><td>✅</td></tr>
        <tr><td>Gemini CLI</td><td>✅</td><td>—</td></tr>
        <tr><td>OpenCode</td><td>—</td><td>✅</td></tr>
    </table>

    <h3>📦 内置预设供应商</h3>
    <p>开箱即用，内置多个主流国产大模型的接入预设配置：</p>
    <ul>
        <li>DeepSeek · 智谱 GLM · MiniMax · Kimi (Moonshot) · 百度千帆 · 阿里通义</li>
    </ul>

    <h3>🔒 隐私与安全</h3>
    <p>本插件所有操作均在本地完成，仅读写本机配置文件，<b>不会收集、上传任何用户数据或敏感信息</b>。</p>

    <h3>⚠️ 免责声明</h3>
    <p>本插件是非官方的社区开源工具，仅供个人学习和研究使用。与 Anthropic、OpenAI、Google、JetBrains 或任何 AI 服务提供商均无附属关系。</p>
    ]]>    </description>

    <change-notes><![CDATA[
    <h3>0.1.3-fix</h3>
    <ul>
        <li><b>修复 MCP 空配置问题</b> — 修复点击"同步全部"按钮时，当没有启用的 MCP 服务器时向配置文件写入空对象 <code>"mcpServers": {}</code> 导致 OpenCode 启动失败的问题。</li>
    </ul>
    <h3>0.1.3</h3>
    <ul>
        <li><b>会话管理</b> — 新增“会话管理”标签页，支持浏览 Claude Code、Codex、Gemini CLI、OpenCode 的本地历史会话。</li>
        <li><b>会话过滤</b> — 支持按 CLI 类型下拉框过滤（默认 Claude Code），并支持关键词搜索。</li>
        <li><b>一键复制</b> — 会话详情中可一键复制恢复命令（如 <code>claude --resume &lt;id&gt;</code>）和项目目录。</li>
        <li><b>消息时间线</b> — 左右分栏布局，左侧会话列表，右侧消息时间线，按角色区分颜色。</li>
    </ul>
    <h3>0.1.2</h3>
    <ul>
        <li><b>MCP / Skills 列表页勾选优化</b> — 支持在主列表直接勾选各 CLI 开关，新增"保存更改"按钮，变更后才允许保存，批量同步配置。</li>
        <li><b>Skills 自动扫描</b> — 首次进入 Skills 面板自动扫描本地已安装技能，无需手动刷新。</li>
        <li><b>提示词（Prompts）优化</b> — 启用时自动保存编辑器内容，避免旧内容覆盖；保存已启用的预设时自动同步到 CLI 配置文件。</li>
        <li><b>MCP 服务器检测</b> — 支持从 Claude/Codex/Gemini/OpenCode 配置文件中扫描并导入已有的 MCP 服务器。</li>
        <li><b>MCP 名称智能提取</b> — 新增/导入时自动从 command/args 中提取有意义的名称（如 @scope/package）。</li>
        <li><b>界面中文化</b> — 全部弹窗、工具栏、状态文字已切换为简体中文。</li>
    </ul>
    ]]>    </change-notes>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- New UI Icon Mapping -->
        <iconMapper mappingFile="CodingSwitchIconMappings.json"/>

        <!-- Tool Window -->
        <toolWindow id="Coding Switch" anchor="right" icon="/icons/codingSwitch.svg" factoryClass="com.github.mostbean.codingswitch.ui.toolwindow.CodingSwitchToolWindowFactory"/>

        <!-- Application-level Services -->
        <applicationService serviceImplementation="com.github.mostbean.codingswitch.service.ProviderService"/>
        <applicationService serviceImplementation="com.github.mostbean.codingswitch.service.McpService"/>
        <applicationService serviceImplementation="com.github.mostbean.codingswitch.service.SkillService"/>
        <applicationService serviceImplementation="com.github.mostbean.codingswitch.service.PromptService"/>
        <applicationService serviceImplementation="com.github.mostbean.codingswitch.service.ConfigFileService"/>
        <applicationService serviceImplementation="com.github.mostbean.codingswitch.service.CliVersionService"/>
        <applicationService serviceImplementation="com.github.mostbean.codingswitch.service.PluginSettings"/>
        <applicationService serviceImplementation="com.github.mostbean.codingswitch.service.SessionScannerService"/>

        <!-- Notification Group -->
        <notificationGroup id="Coding Switch" displayType="BALLOON" toolWindowId="Coding Switch"/>
    </extensions>
</idea-plugin>
